{% set title = "Login" %}
{% extends "layout.html" %}
{% block content %}

<!--
<form method="POST">
	{% for field in user_form %}
		{% for err in field.errors %}
			<p>{{ err }}</p>
		{% endfor %}
		{#{{ field.label if not field.flags.hidden }} {{ field }}<br>#}
	{% endfor %}

	{# More control without a for loop here #}
	{{ user_form.username.label }} {{ user_form.username }}<br>
	{{ user_form.password.label }} {{ user_form.password }}<br>
	{{ user_form.csrf_token }}
	<a class="link-dark" href="{{ url_for('forgot_password') }}">Forgot password?</a><br>
	<input type="submit">
</form>
-->

<main class="form-signin">
  <form autocomplete="off" method="POST">
    <h1 class="h3 mb-3 fw-normal">Please sign in</h1>

    <div class="form-floating">
      <input type="text" class="form-control" id="floatingInputUsername" placeholder="" name="username">
      <label for="floatingInput">Username</label>
    </div>
    <div class="form-floating">
      <input type="password" class="form-control" id="floatingPassword" placeholder="Password" name="password">
      <label for="floatingPassword">Password</label>
    </div>

    <div class="checkbox mb-3">
      <label>
        <input id="remember-me" type="checkbox" value="remember-me"> Remember me
      </label>
    </div>
    {{ user_form.csrf_token }}
    <button class="w-100 btn btn-lg btn-primary" type="submit">Sign in</button>
  </form>
</main>

{# https://codepen.io/AllThingsSmitty/pen/pOoeyz #}
<script>
	const rmCheck = document.getElementById("remember-me"),
	    emailInput = document.getElementById("floatingInputUsername");

	if (localStorage.checkbox && localStorage.checkbox !== "") {
	  rmCheck.setAttribute("checked", "checked");
	  emailInput.value = localStorage.username;
	} else {
	  rmCheck.removeAttribute("checked");
	  emailInput.value = "";
	}

	function lsRememberMe() {
	  if (rmCheck.checked && emailInput.value !== "") {
	    localStorage.username = emailInput.value;
	    localStorage.checkbox = rmCheck.value;
	  } else {
	    localStorage.username = "";
	    localStorage.checkbox = "";
	  }
	}
</script>

{% endblock content %}