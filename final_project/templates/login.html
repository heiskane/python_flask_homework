{% set title = "Login" %}
{% extends "layout.html" %}
{% block content %}

<main class="form-signin">
  <form autocomplete="off" method="POST">
    <h1 class="text-light h3 mb-3 fw-normal">Please sign in</h1>

    <div class="text-dark form-floating">
      <input type="text" class="form-control" id="floatingInputUsername" placeholder="Username" name="username">
      <label for="floatingInput">Username</label>
    </div>
    <div class="text-dark form-floating">
      <input type="password" class="form-control" id="floatingPassword" placeholder="Password" name="password">
      <label for="text-dark floatingPassword">Password</label>
    </div>

    <div class="checkbox mb-3 text-light">
      <label>
        <input id="remember-me" type="checkbox" value="remember-me"> Remember me
      </label>
    </div>
    {{ user_form.csrf_token }}
    <button class="w-100 btn btn-lg btn-primary" type="submit">Sign in</button>
  </form>
</main>

{# https://codepen.io/AllThingsSmitty/pen/pOoeyz #}
<script>
	const rmCheck = document.getElementById("remember-me"),
	    emailInput = document.getElementById("floatingInputUsername");

	if (localStorage.checkbox && localStorage.checkbox !== "") {
	  rmCheck.setAttribute("checked", "checked");
	  emailInput.value = localStorage.username;
	} else {
	  rmCheck.removeAttribute("checked");
	  emailInput.value = "";
	}

	function lsRememberMe() {
	  if (rmCheck.checked && emailInput.value !== "") {
	    localStorage.username = emailInput.value;
	    localStorage.checkbox = rmCheck.value;
	  } else {
	    localStorage.username = "";
	    localStorage.checkbox = "";
	  }
	}
</script>

{% endblock content %}